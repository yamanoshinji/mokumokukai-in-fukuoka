# Phase 1: インターフェースと脳の構築 (コマ1-3)

## 1. 要件定義・プロンプト設計
**変更点:** 「コード解析」ではなく**「設計提案プロセス」**を定義。AIに**アーキテクトのペルソナ**を与え、修正依頼に対してどのような図（ER/シーケンス等）を出力すべきかのルールを設計。

## 2. AWS基盤構築 (Bedrock + Streamlit/Slack)
**変更点:** Webhookではなく、**チャットUI（Fargate上のStreamlitやSlack Bot）とBedrockを接続**する構成にする。会話履歴を保持する**DynamoDB**も構築。

## 3. RAG基盤構築 (Knowledge Bases for Amazon Bedrock)
**変更点:** ここが重要。**既存の設計書（PDF/MD）とソースコードの両方をベクトル化して検索可能にする**RAG基盤を構築。

---

# Phase 2: 設計・検証ロジックの実装 (コマ4-7)

## 4. 依存関係特定・影響範囲分析
チャットの依頼内容から、修正が必要な**ファイルやテーブルを特定するAgent**を実装。

## 5. ドキュメント生成機能 (Mermaid)
修正内容に基づき、Mermaid記法で**修正後のER図・シーケンス図**を生成させるプロンプトエンジニアリング。

## 6. 整合性チェック (Validater AI)
Copilotとの差別化の核心。生成された図と既存設計書を比較し、**命名規則違反・禁止されている物理削除の実装などの矛盾を指摘**するロジック。

## 7. CRUD図・クラス図の自動更新
データベース操作を伴う場合、CRUDマトリクスとして影響を可視化する機能を実装。

---

# Phase 3: コード生成と統合 (コマ8-10)

## 8. コード生成・PR作成
設計が承認された後、その設計に基づきソースコードを生成し、**GitHubにPRを作成**（設計図更新コミットも含む）。

## 9. 統合テスト・対話UX調整
「チャット依頼 → 図で確認 → コード生成」の一連の流れを通しでテスト。

## 10. 成果発表・デモ
デモではあえて**矛盾する修正依頼**を投げ、AIが「既存仕様と矛盾します」と指摘できることを実証。

- [20260128.mdへ戻る](20260128.md)